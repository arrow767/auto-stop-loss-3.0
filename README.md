# Binance Futures Loss Guardian 2.0

## Overview

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–æ–ø-–ª–æ—Å—Å –¥–ª—è Binance Futures, –∫–æ—Ç–æ—Ä—ã–π:
- –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ USDT-M perpetual –∫–∞–∂–¥—ã–µ N –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å —Ü–≤–µ—Ç–Ω—ã–º PnL (–∑–µ–ª–µ–Ω—ã–π/–∫—Ä–∞—Å–Ω—ã–π)
- **–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏ –±–µ–∑ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞** –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–∑–∏—Ü–∏–∏, –µ—Å–ª–∏ —É–±—ã—Ç–æ–∫ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –∑–∞–¥–∞–Ω–Ω—ã–π –ª–∏–º–∏—Ç
- –û—Ç–º–µ–Ω—è–µ—Ç –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –æ—Ä–¥–µ—Ä–∞ (–≤–∫–ª—é—á–∞—è algo orders: SL, TP, trailing stops) –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º –ø–æ–∑–∏—Ü–∏–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ Binance API —Å algo orders (STOP_MARKET, TAKE_PROFIT_MARKET –∏ –¥—Ä.)
- –ò–º–µ–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π HTTP healthcheck endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- –£—Å—Ç–æ–π—á–∏–≤ –∫ —Å–µ—Ç–µ–≤—ã–º —Å–±–æ—è–º –∏ rate limits (exponential backoff)

**–¶–µ–ª—å**: –ó–∞—â–∏—Ç–∞ –æ—Ç –±–æ–ª—å—à–∏—Ö —É–±—ã—Ç–∫–æ–≤ –ø—Ä–∏ —Ç–æ—Ä–≥–æ–≤–ª–µ –Ω–∞ Binance Futures –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞.

## Setup

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Bun >= 1.0 (–∏–ª–∏ Node.js >= 18 –¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏)
- –ê–∫–∫–∞—É–Ω—Ç Binance —Å API –∫–ª—é—á–∞–º–∏ –¥–ª—è Futures
- –î–æ—Å—Ç—É–ø –∫ Binance Futures API

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bun install
```

To run:

```bash
# –ó–∞–ø—É—Å–∫ —Å Bun
bun run index.ts

# –ò–ª–∏ —Å Node.js (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ts-node)
npx ts-node index.ts
```

### Docker

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t binance-loss-guardian .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name loss-guardian \
  --env-file .env \
  -p 3000:3000 \
  binance-loss-guardian
```

## –î–µ–ø–ª–æ–π –Ω–∞ Render

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. [DEPLOY.md](./DEPLOY.md)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ [Render.com](https://render.com)
2. Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç `render.yaml` –∏ —Å–æ–∑–¥–∞—Å—Ç —Å–µ—Ä–≤–∏—Å
3. **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `BINANCE_API_KEY` - –≤–∞—à API –∫–ª—é—á –æ—Ç Binance
   - `BINANCE_API_SECRET` - –≤–∞—à API —Å–µ–∫—Ä–µ—Ç –æ—Ç Binance
   - `MAX_LOSS_USD` - –ª–∏–º–∏—Ç —É–±—ã—Ç–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `100`)
   - `DRY_RUN` - `false` –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏–ª–∏ `true` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –°–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-------------|-----------|
| `BINANCE_API_KEY` | ‚úÖ –î–∞ | API –∫–ª—é—á –æ—Ç Binance Futures |
| `BINANCE_API_SECRET` | ‚úÖ –î–∞ | API —Å–µ–∫—Ä–µ—Ç –æ—Ç Binance Futures |
| `MAX_LOSS_USD` | ‚úÖ –î–∞ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —É–±—ã—Ç–æ–∫ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º |
| `DRY_RUN` | ‚úÖ –î–∞ | –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (`true`/`false`) |
| `INTERVAL_MS` | ‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è | –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (–º—Å), –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `1000` |
| `ENABLE_TELEGRAM_NOTIFICATIONS` | ‚ùå –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ | –í–∫–ª—é—á–∏—Ç—å Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| `TELEGRAM_BOT_TOKEN` | ‚ùå –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –¢–æ–∫–µ–Ω Telegram –±–æ—Ç–∞ |
| `TELEGRAM_CHAT_ID` | ‚ùå –ï—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | ID —á–∞—Ç–∞ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–º. –≤ [DEPLOY.md](./DEPLOY.md#–≤–∞–∂–Ω—ã–µ-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è).

## –î–µ–ø–ª–æ–π –Ω–∞ DigitalOcean

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. [DEPLOY_DO.md](./DEPLOY_DO.md)

### –í–∞—Ä–∏–∞–Ω—Ç—ã –¥–µ–ø–ª–æ—è

1. **App Platform** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π, –ø–æ—Ö–æ–∂ –Ω–∞ Render
   - –û—Ç $5/–º–µ—Å
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push
   - –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

2. **Droplet** (VPS) - –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å, —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
   - –û—Ç $6/–º–µ—Å
   - –ë–æ–ª—å—à–µ –≥–∏–±–∫–æ—Å—Ç–∏
   - –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Docker

### –°–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢–µ –∂–µ —Å–∞–º—ã–µ, —á—Ç–æ –∏ –¥–ª—è Render (—Å–º. –≤—ã—à–µ).

### Healthcheck

**App Platform:**
- `https://your-app-name.ondigitalocean.app/health`

**Droplet:**
- `http://your-droplet-ip:3000/health`

–û—Ç–≤–µ—Ç healthcheck:
```json
{
  "status": "healthy",
  "healthy": true,
  "lastTickTime": 1234567890,
  "consecutiveErrors": 0,
  "uptime": 3600,
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

```env
MAX_LOSS_USD=50
INTERVAL_MS=2000
DRY_RUN=false
SHOW_ALL=true
```

### –ü—Ä–∏–º–µ—Ä –¥–ª—è –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏

```env
MAX_LOSS_USD=200
INTERVAL_MS=500
DRY_RUN=false
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** - –æ–Ω–æ –Ω–∞—á–Ω–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø–æ–∑–∏—Ü–∏–∏
2. **–°–ª–µ–¥–∏—Ç–µ –∑–∞ –ª–æ–≥–∞–º–∏** - –≤—ã —É–≤–∏–¥–∏—Ç–µ –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å PnL
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ SL**:
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–∑–∏—Ü–∏–∏
   - –ï—Å–ª–∏ –ø–æ–∑–∏—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∞ –±–µ–∑ SL (–Ω–µ—Ç algo order —Ç–∏–ø–∞ STOP_MARKET/STOP —Å qty > 0), –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥)
   - –ö–æ–≥–¥–∞ SL –ø–æ—è–≤–ª—è–µ—Ç—Å—è, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è
4. **–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞** - –ø–æ–∑–∏—Ü–∏—è –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–∫—Ä—ã—Ç–∞:
   - –°–Ω–∞—á–∞–ª–∞ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ –æ—Ä–¥–µ—Ä–∞ (–æ–±—ã—á–Ω—ã–µ + algo orders: SL, TP, trailing stops)
   - –ó–∞—Ç–µ–º –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è market –æ—Ä–¥–µ—Ä–æ–º —Å `reduceOnly=true`
   - –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ø—ã—Ç–æ–∫ —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã):
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ `positionAmt === 0` (–ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∞)
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –æ–±—ã—á–Ω—ã—Ö –æ—Ä–¥–µ—Ä–æ–≤
     * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —á—Ç–æ –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö algo –æ—Ä–¥–µ—Ä–æ–≤
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
=== Binance Futures Loss Guardian (polling every 1000ms, max loss 100 USDT, dryRun=false) ===
BTCUSDT    | ‚ñ≤ LONG  | amt=0.100000 | PnL=+15.50 USDT
ETHUSDT    | ‚ñº SHORT | amt=1.500000 | PnL=-25.30 USDT
[SL ALERT] ETHUSDT LONG position without SL!
[ALERT] ETHUSDT loss 25.30 ‚â• 100. Closing...
ETHUSDT regular orders canceled
ETHUSDT algo orders (SL/TP) canceled
Closed ETHUSDT via BUY 1.5. OrderId=12345, status=FILLED
Verifying position closure for ETHUSDT...
‚úÖ Verified: ETHUSDT position closed, all orders canceled
```

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏

–ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –ø–æ–∑–∏—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Å –¥–µ—Ç–∞–ª—è–º–∏:

```
‚úÖ POSITION CLOSED: ETHUSDT
Side: BUY
Quantity: 1.5
Order ID: 12345
Status: FILLED
PnL before close: -25.30 USDT

Verification:
Position: ‚úÖ Closed
Orders remaining: 0
Details: Position closed, all orders canceled (regular: 0, algo: 0)

Regular orders: ‚úÖ Canceled
Algo orders: ‚úÖ Canceled
```

–ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ, –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–∏ –±—É–¥–µ—Ç —É–∫–∞–∑–∞–Ω–æ, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–∫—Ä—ã—Ç—å.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

1. **–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ [@BotFather](https://t.me/BotFather)
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`)

2. **–ü–æ–ª—É—á–∏—Ç–µ Chat ID**:
   - –î–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π: –Ω–∞–π–¥–∏—Ç–µ [@userinfobot](https://t.me/userinfobot) –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –î–ª—è –∫–∞–Ω–∞–ª–∞: –¥–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–∞–Ω–∞–ª –∏ –ø–æ–ª—É—á–∏—Ç–µ chat_id —á–µ—Ä–µ–∑ API –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ [@getidsbot](https://t.me/getidsbot)
   - Chat ID –¥–ª—è –∫–∞–Ω–∞–ª–∞ –æ–±—ã—á–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `-100` (–Ω–∞–ø—Ä–∏–º–µ—Ä: `-1001234567890`)

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```env
   ENABLE_TELEGRAM_NOTIFICATIONS=true
   TELEGRAM_BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
   TELEGRAM_CHAT_ID=-1001234567890
   TELEGRAM_NOTIFICATION_INTERVAL_MS=15000
   ```

4. **–§–æ—Ä–º–∞—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**:
   - **–ü–æ–∑–∏—Ü–∏–∏ –±–µ–∑ SL**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–∞–∂–¥—ã–µ N –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15 —Å–µ–∫)
     ```
     ‚ö†Ô∏è ETHUSDT POSITION WITHOUT SL!
     Side: LONG
     Size: 1.500000
     PnL: -25.30 USDT
     ```
   - **–ó–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–∑–∏—Ü–∏–∏**: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ —Å –¥–µ—Ç–∞–ª—è–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
     ```
     ‚úÖ POSITION CLOSED: ETHUSDT
     Side: BUY
     Quantity: 1.5
     Order ID: 12345
     Status: FILLED
     PnL before close: -25.30 USDT
     
     Verification:
     Position: ‚úÖ Closed
     Orders remaining: 0
     Details: Position closed, all orders canceled (regular: 0, algo: 0)
     
     Regular orders: ‚úÖ Canceled
     Algo orders: ‚úÖ Canceled
     ```
   - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–∑–∏—Ü–∏—è—Ö –±–µ–∑ SL –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è, –∫–æ–≥–¥–∞ SL –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∏–ª–∏ –ø–æ–∑–∏—Ü–∏—è –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Dry Run —Ä–µ–∂–∏–º

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `DRY_RUN=true` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–¥–µ–ª–æ–∫:

```env
DRY_RUN=true
```

–í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è, –Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∏—Ö.

## Troubleshooting

### –û—à–∏–±–∫–∞ "Missing required env: BINANCE_API_KEY"

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
- –í `.env` —Ñ–∞–π–ª–µ (–ª–æ–∫–∞–ª—å–Ω–æ)
- –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ Render (–Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

### –û—à–∏–±–∫–∞ "Too many consecutive errors"

**–ü—Ä–∏—á–∏–Ω–∞**: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫ –ø–æ–¥—Ä—è–¥ (—Å–µ—Ç—å, API, –∏ —Ç.–¥.)

**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å API –∫–ª—é—á–µ–π
- –£–≤–µ–ª–∏—á—å—Ç–µ `INTERVAL_MS` –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API Binance

### Healthcheck –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 503

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å tick –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –æ—à–∏–±–æ–∫

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render Dashboard
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ API –∫–ª—é—á–∏ –≤–∞–ª–∏–¥–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å Binance API

### –ü–æ–∑–∏—Ü–∏—è –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
- `DRY_RUN=true` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –∫–æ–º–∏—Å—Å–∏–∏
- –ü–æ–∑–∏—Ü–∏—è —É–∂–µ –∑–∞–∫—Ä—ã—Ç–∞ –≤—Ä—É—á–Ω—É—é
- –ü—Ä–æ–±–ª–µ–º—ã —Å API (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)

### Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã**:
- `ENABLE_TELEGRAM_NOTIFICATIONS=false` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤ `true`
- –ù–µ–≤–µ—Ä–Ω—ã–π `TELEGRAM_BOT_TOKEN` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather
- –ù–µ–≤–µ—Ä–Ω—ã–π `TELEGRAM_CHAT_ID` - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ ID —á–µ—Ä–µ–∑ @userinfobot –∏–ª–∏ @getidsbot
- –ë–æ—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–∞–Ω–∞–ª –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (–¥–ª—è –∫–∞–Ω–∞–ª–æ–≤)
- –ü–æ–∑–∏—Ü–∏—è –∏–º–µ–µ—Ç —Å—Ç–æ–ø-–ª–æ—Å—Å (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### –ü–æ–∑–∏—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∫–∞–∫ "–±–µ–∑ SL", —Ö–æ—Ç—è SL –µ—Å—Ç—å

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç algo orders (STOP_MARKET, STOP) –∏ –æ–±—ã—á–Ω—ã–µ stop orders. –ï—Å–ª–∏ SL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —á–µ—Ä–µ–∑ –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º, –æ–Ω –º–æ–∂–µ—Ç –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å—Å—è.

**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ SL —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ algo order —Ç–∏–ø–∞ STOP_MARKET –∏–ª–∏ STOP —Å qty > 0 –∏–ª–∏ closePosition=true.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫ Binance API. –ò–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—Ä–µ–º—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –±–∏—Ä–∂–µ.

**–†–µ—à–µ–Ω–∏–µ**: 
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–µ–ª–∞–µ—Ç –¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 1 —Å–µ–∫—É–Ω–¥–∞
- –ï—Å–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—à–ª–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram –ø–æ–∫–∞–∂–µ—Ç –¥–µ—Ç–∞–ª–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –í —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –±–∏—Ä–∂–µ

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å:
- `[ALERT]` - –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —É–±—ã—Ç–∫–∞
- `[ERR]` - –æ—à–∏–±–∫–∏
- `[WARN]` - –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
- `[DRY]` - –¥–µ–π—Å—Ç–≤–∏—è –≤ dry run —Ä–µ–∂–∏–º–µ

### Healthcheck

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/health` endpoint –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
- –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –Ω–∞ `status: "unhealthy"`

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û**:
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ Git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ API –∫–ª—é—á–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –ø—Ä–∞–≤–∞ API –∫–ª—é—á–µ–π (—Ç–æ–ª—å–∫–æ Futures, –±–µ–∑ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤)
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

## Changelog

- 2024-01-XX: –î–æ–±–∞–≤–ª–µ–Ω –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ —Å—Ç–æ–ø-–ª–æ—Å—Å–∞
- 2024-01-XX: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –ø–æ–∑–∏—Ü–∏–π –±–µ–∑ SL
- 2024-01-XX: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ algo orders (STOP_MARKET, TAKE_PROFIT_MARKET –∏ –¥—Ä.)
- 2024-01-XX: –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø–æ–∑–∏—Ü–∏–π - –æ—Ç–º–µ–Ω—è—é—Ç—Å—è –≤—Å–µ —Ç–∏–ø—ã –æ—Ä–¥–µ—Ä–æ–≤ (regular + algo)
- 2024-01-XX: –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- 2024-01-XX: –î–æ–±–∞–≤–ª–µ–Ω HTTP healthcheck endpoint
- 2024-01-XX: –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è graceful shutdown
- 2024-01-XX: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é –Ω–∞ Render

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **–Ø–∑—ã–∫**: TypeScript
- **Runtime**: Bun (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å Node.js)
- **API**: Binance Futures REST API (fapi)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Single-file, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∫—Ä–æ–º–µ Bun/Node)
- **Retry –ª–æ–≥–∏–∫–∞**: Exponential backoff —Å jitter
- **–û–∫—Ä—É–≥–ª–µ–Ω–∏–µ**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ LOT_SIZE —Ñ–∏–ª—å—Ç—Ä—É

## –õ–∏—Ü–µ–Ω–∑–∏—è

Private project - –Ω–µ –¥–ª—è –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
