# Changelog

## [2.0] - 2024-01-XX

### Добавлено
- ✅ **Мониторинг позиций без стоп-лосса**: Автоматическая проверка наличия SL для каждой открытой позиции
- ✅ **Telegram уведомления**: Интеграция с Telegram ботом для отправки уведомлений о позициях без SL
- ✅ **Уведомления при закрытии позиции**: Автоматическая отправка уведомлений в Telegram при закрытии позиции с деталями проверки
- ✅ **Проверка закрытия позиции**: Многоуровневая проверка через HTTP запросы:
  - Проверка, что позиция закрыта (positionAmt === 0)
  - Проверка отсутствия обычных ордеров
  - Проверка отсутствия algo ордеров
  - До 5 попыток проверки с задержкой
- ✅ **Поддержка algo orders**: Работа с новыми типами ордеров Binance (STOP_MARKET, TAKE_PROFIT_MARKET, STOP, TRAILING_STOP_MARKET)
- ✅ **Улучшенное закрытие позиций**: Отмена всех типов ордеров (regular + algo) перед закрытием позиции
- ✅ **Автоматический перезапуск**: Приложение автоматически перезапускается при критических ошибках
- ✅ **HTTP Healthcheck**: Endpoint `/health` для мониторинга состояния приложения
- ✅ **Graceful shutdown**: Корректное завершение работы при получении сигналов SIGINT/SIGTERM
- ✅ **env.example**: Файл с примером всех переменных окружения

### Изменено
- Обновлена логика проверки SL: учитываются algo orders и обычные stop orders
- Улучшена обработка ошибок с экспоненциальным backoff
- Обновлена документация с инструкциями по настройке Telegram

### Технические детали
- Используется Binance Futures API `/fapi/v1/algoOrders` для получения algo orders
- Проверка SL учитывает ордера с `qty > 0` или `closePosition=true`
- Уведомления отправляются с настраиваемым интервалом (по умолчанию 15 секунд)
- При ошибке проверки SL считается, что SL есть (чтобы не спамить уведомлениями)
