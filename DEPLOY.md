# Инструкция по деплою на Render

## Быстрый старт

1. **Подготовка репозитория**
   - Убедитесь, что все файлы закоммичены в Git
   - Файлы уже готовы: `Dockerfile`, `render.yaml`, `.dockerignore`

2. **Создание сервиса на Render**
   - Зайдите на [render.com](https://render.com)
   - Нажмите "New +" → "Web Service"
   - Подключите ваш GitHub репозиторий
   - Render автоматически обнаружит `render.yaml`

3. **Настройка переменных окружения**
   В настройках сервиса добавьте:
   ```
   BINANCE_API_KEY=ваш_ключ
   BINANCE_API_SECRET=ваш_секрет
   ```
   Остальные переменные уже настроены в `render.yaml` с разумными значениями по умолчанию.

4. **Деплой**
   - Render автоматически соберет Docker образ
   - Запустит контейнер
   - Healthcheck будет доступен на `/health`

## Проверка работы

После деплоя проверьте:
- Логи в Render Dashboard - должны быть сообщения о запуске
- Healthcheck: `https://your-service.onrender.com/health` - должен вернуть `{"status":"healthy"}`

## Автоматический перезапуск

Приложение автоматически перезапускается при:
- Критических ошибках в основном цикле
- Превышении лимита последовательных ошибок
- Непредвиденных исключениях

Максимум попыток перезапуска: 10 (настраивается через `MAX_RESTART_ATTEMPTS`)

## Мониторинг

- **Логи**: Render Dashboard → Logs
- **Healthcheck**: GET `/health` каждые 30 секунд
- **Метрики**: `uptime`, `consecutiveErrors`, `lastTickTime` в healthcheck ответе
